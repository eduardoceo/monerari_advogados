<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editor de Notícias - Escritório</title>
    
    <!-- Netlify Identity -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    
    <!-- Decap CMS - Última versão -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f7fafc;
        }
    </style>
</head>
<body>
    <script>
        // CONFIGURAÇÃO DIRETA NO HTML - SEM arquivo config.yml externo
        window.CMS_CONFIG = {
            backend: {
                name: "git-gateway",
                branch: "main"
            },
            locale: 'pt',
            media_folder: "images/uploads",
            public_folder: "/images/uploads",
            collections: [
                {
                    name: "noticias",
                    label: "Notícias",
                    folder: "content/noticias",
                    create: true,
                    slug: "{{slug}}",
                    fields: [
                        { label: "Título", name: "title", widget: "string" },
                        { label: "Data", name: "date", widget: "datetime" },
                        { label: "Autor", name: "author", widget: "string", default: "Escritório" },
                        { label: "Descrição", name: "description", widget: "text" },
                        { label: "Imagem Destaque", name: "featured_image", widget: "image", required: false },
                        { label: "Conteúdo", name: "body", widget: "markdown" }
                    ]
                }
            ]
        };

        // Inicializa o CMS com a configuração
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof CMS !== 'undefined') {
                CMS.init({ config: window.CMS_CONFIG });
            }
        });
    </script>
</body>
</html>